---
title: "트러블슈팅"
description: "Vercel 배포 시 자주 만나는 문제와 해결 방법을 정리합니다."
step: 7
---

## 빌드 실패

### "Module not found" 에러

```
Module not found: Can't resolve './components/Header'
```

**원인**: import 경로가 잘못되었거나, 파일명 대소문자가 다름

**해결**:
- 파일명 대소문자 확인 (macOS는 대소문자 구분 안 함, Linux는 구분함)
- 상대 경로 대신 `@/` alias 사용 권장

```tsx
// ❌ 대소문자 문제 가능
import Header from './components/header';

// ✅ 정확한 경로
import Header from '@/components/Header';
```

<Callout type="warning">
macOS에서는 정상 동작하지만 Vercel(Linux)에서 빌드 실패하는
가장 흔한 원인이 파일명 대소문자 불일치입니다.
</Callout>

### TypeScript 에러

로컬에서는 에러가 없는데 빌드 시 타입 에러가 발생하는 경우:

```bash
# 로컬에서 빌드 테스트
pnpm build
```

<Callout type="tip">
배포 전에 로컬에서 `pnpm build`를 실행해보면 빌드 에러를 미리 잡을 수 있습니다.
</Callout>

### ESLint 에러로 빌드 실패

Next.js는 빌드 시 ESLint를 실행합니다. 임시로 무시하려면:

```ts
// next.config.ts
const nextConfig = {
  eslint: {
    ignoreDuringBuilds: true,
  },
};
```

하지만 근본적으로 ESLint 에러를 수정하는 것이 좋습니다.

## 환경변수 관련

### 환경변수가 undefined

**체크리스트**:

1. Vercel 대시보드에서 환경변수가 올바른 환경(Production/Preview)에 설정되었는지 확인
2. `NEXT_PUBLIC_` 접두사가 필요한지 확인 (클라이언트에서 쓰려면 필수)
3. 환경변수 설정 후 **재배포** 했는지 확인

### .env.local이 배포에 반영되지 않음

`.env.local`은 **로컬 전용**입니다. `.gitignore`에 포함되어 있어 GitHub에 올라가지 않습니다.
배포 환경에서는 반드시 Vercel 대시보드에서 설정해야 합니다.

## 캐시 관련

### 변경사항이 반영되지 않을 때

```bash
# 브라우저 캐시 무시하고 새로고침
Ctrl + Shift + R (Windows/Linux)
Cmd + Shift + R (Mac)
```

Vercel 측 캐시 문제라면:
1. 대시보드 → Deployments → 최신 배포 확인
2. 빌드가 성공했는지 확인
3. 필요하면 **Redeploy** (캐시 없이: "Redeploy with existing Build Cache" 체크 해제)

## 도메인 관련

### 커스텀 도메인 연결

1. **Settings** → **Domains**
2. 도메인 입력 후 **Add**
3. DNS 설정 안내에 따라 도메인 제공업체에서 설정

| 레코드 타입 | 값 |
|-------------|-----|
| **CNAME** | `cname.vercel-dns.com` |
| 또는 **A** | `76.76.21.21` |

<Callout type="info">
DNS 변경은 전파에 최대 48시간 걸릴 수 있습니다.
보통 수 분 내에 적용됩니다.
</Callout>

## 유용한 디버깅 팁

1. **로컬에서 먼저 빌드**: `pnpm build`로 빌드 에러 사전 확인
2. **Function Logs**: 대시보드 → **Logs** 탭에서 서버 사이드 로그 확인
3. **Deployment URL 직접 확인**: 각 배포마다 고유 URL이 있어 특정 배포의 상태를 확인 가능
4. **Vercel CLI**: `vercel` 명령어로 로컬에서 Vercel 환경을 시뮬레이션

```bash
# Vercel CLI 설치
pnpm add -g vercel

# 로컬에서 Vercel 환경으로 실행
vercel dev
```
